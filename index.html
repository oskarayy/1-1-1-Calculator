<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator - EasyTutorials</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <div class="calculator">
        <form>
          <div class="display">
            <input type="text" name="display" />
          </div>
          <div>
            <input
              type="button"
              class="operator"
              value="CE"
              onclick="display.value = '' " />
            <input
              type="button"
              class="operator"
              value="DE"
              onclick="display.value = display.value.slice(0,display.value.length - 1) " />
            <input
              type="button"
              class="operator"
              value="."
              onclick="display.value += getDotIfPossible(display.value)" />
            <input
              type="button"
              class="operator"
              value="/"
              onclick="display.value += this.value" />
          </div>
          <div>
            <input
              type="button"
              value="7"
              onclick="display.value += this.value" />
            <input
              type="button"
              value="8"
              onclick="display.value += this.value" />
            <input
              type="button"
              value="9"
              onclick="display.value += this.value" />
            <input
              type="button"
              class="operator"
              value="*"
              onclick="display.value += this.value" />
          </div>
          <div>
            <input
              type="button"
              value="4"
              onclick="display.value += this.value" />
            <input
              type="button"
              value="5"
              onclick="display.value += this.value" />
            <input
              type="button"
              value="6"
              onclick="display.value += this.value" />
            <input
              type="button"
              class="operator"
              value="-"
              onclick="display.value += this.value" />
          </div>
          <div>
            <input
              type="button"
              value="1"
              onclick="display.value += this.value" />
            <input
              type="button"
              value="2"
              onclick="display.value += this.value" />
            <input
              type="button"
              value="3"
              onclick="display.value += this.value " />
            <input
              type="button"
              class="operator"
              value="+"
              onclick="display.value += this.value" />
          </div>
          <div>
            <input
              type="button"
              value="00"
              onclick="display.value += getZeroIfPossible(display.value, this.value)" />
            <input
              type="button"
              value="0"
              onclick="display.value += getZeroIfPossible(display.value, this.value)" />
            <input
              type="button"
              class="operator"
              value="="
              onclick="display.value = eval(display.value) " />
          </div>
        </form>
      </div>
    </div>

    <script>
      function getZeroIfPossible(string, value) {
        if (string === '0') return '';
        else if (string === '' && value === '00') return '';
        else if (
          !Number.isNaN(+string[string.length - 2]) &&
          +string[string.length - 1] !== '0'
        )
          return value;
        else return value;
      }

      function getDotIfPossible(string) {
        const specials = ['+', '-', '*', '/'];
        const symbols = string.split('');

        if (specials.includes(symbols[symbols.length - 1])) return '';

        const lastDotIndex = symbols.findLastIndex((item) => item === '.');
        const specialIndex = symbols.findLastIndex((item) =>
          specials.includes(item)
        );

        return lastDotIndex <= specialIndex || lastDotIndex === -1 ? '.' : '';
      }
    </script>
  </body>
</html>
